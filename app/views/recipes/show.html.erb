
<br> Created on <%= created_date_of @recipe %>


<h3 style="color: salmon;"><%= @recipe.name %> </h3>

<% if @recipe.image.attached? %>
    <image src="<%=(url_for(@recipe.image)) %>">
<% end %>

<ul>
    <li><strong>Servings: <%= @recipe.number_of_persons%></strong></li>
</ul>

<h3 style="color: salmon;">Ingredients</h3>
<ul>
    <% @recipe.recipe_ingredients.each do |rec_ing| %>
    <table>
        <thead>
            <th><%= rec_ing.ingredient.name %></th>
        </thead>
        <tbody>
            <td><%= rec_ing.amount %></td>
        </tbody>
    </table>
    <% end %>
</ul>

<h3 style="color: salmon;">Cooking Directions</h3>
<% @recipe.directions.each do |dir| %> 
<p>
    <%= dir.cooking_process %> 
</p>
<% end %>

<h3>Comments</h3>
<% @recipe.comments.each do |comment| %>
    <% if comment.user.username.present? %>
        <strong style="color: slategrey;"><%= comment.user.username.capitalize %> said:</strong> <%= comment.content %>
    <% else %> 
        <strong style="color: slategrey;"><%= comment.user.name.capitalize  %> said:</strong> <%= comment.content %>
    <% end %> 

    <% if comment.user == current_user %>
        <%= link_to "Edit", edit_comment_path(comment) %> 
        <%= button_to "x", comment_path(comment), method: :delete, class: "destroy", data: {confirm: "Are you sure?" } %>
    <% end %> <br>
<% end %>

<%= render partial: "comments/form", locals: { comment: @recipe.comments.build } %>

<% if current_user.admin == true %>
    <%= link_to "Back", recipes_path %> <br>
    <%= link_to "Edit", edit_recipe_path(@recipe) %> <br>
    <%= link_to "Delete", recipe_path(@recipe), method: :delete, data: {confirm: "Are you sure?" } %> <br>
<% elsif @recipe.user == current_user %>
    <%= link_to "Back", recipes_path %> <br>
    <%= link_to "Edit", edit_recipe_path(@recipe) %> <br>
    <%= link_to "Delete", recipe_path(@recipe), method: :delete, data: {confirm: "Are you sure?" } %> <br>
<% else %>
    <%= link_to "Back", recipes_path %> <br>
<% end %>